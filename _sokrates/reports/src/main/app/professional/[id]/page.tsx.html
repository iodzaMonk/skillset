<html>
<head>
    <title>app/professional/[id]/page.tsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">app/professional/[id]/page.tsx (<b>140</b> lines of code) (<a href="page.tsx">raw</a>):</h3>
<div id="editor">&quot;use client&quot;;

import axios from &quot;axios&quot;;
import Image from &quot;next/image&quot;;
import Link from &quot;next/link&quot;;
import { useParams, useRouter } from &quot;next/navigation&quot;;
import { useEffect, useState } from &quot;react&quot;;

import { ProfessionalProfile } from &quot;@/types/Professional&quot;;
import { getCountryName } from &quot;@/types/Country&quot;;

const FALLBACK_IMAGE = &quot;/no-image.svg&quot;;

async function fetchProfessionalProfile(id: string) {
  const response = await axios.get(`/api/professional/${id}`);
  return response.data as ProfessionalProfile;
}

export default function ProfessionalProfilePage() {
  const router = useRouter();
  const { id } = useParams&lt;{ id: string }&gt;();
  const [profile, setProfile] = useState&lt;ProfessionalProfile | null&gt;(null);
  const [error, setError] = useState&lt;string | null&gt;(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() =&gt; {
    if (!id) return;

    setIsLoading(true);
    fetchProfessionalProfile(id)
      .then(setProfile)
      .catch((err) =&gt; {
        console.error(&quot;Failed to load professional profile&quot;, err);
        setError(
          axios.isAxiosError(err)
            ? (err.response?.data?.message ?? &quot;Failed to load profile&quot;)
            : &quot;Failed to load profile&quot;,
        );
      })
      .finally(() =&gt; setIsLoading(false));
  }, [id]);

  if (isLoading) {
    return (
      &lt;div className=&quot;flex h-[70vh] items-center justify-center&quot;&gt;
        &lt;p className=&quot;text-text-muted text-sm&quot;&gt;Loading profile&hellip;&lt;/p&gt;
      &lt;/div&gt;
    );
  }

  if (error || !profile) {
    return (
      &lt;div className=&quot;flex h-[70vh] flex-col items-center justify-center gap-4 text-center&quot;&gt;
        &lt;p className=&quot;text-error bg-error/10 rounded-md px-4 py-2 text-sm&quot;&gt;
          {error ?? &quot;Professional not found&quot;}
        &lt;/p&gt;
        &lt;button
          onClick={() =&gt; router.back()}
          className=&quot;text-primary hover:text-primary/80 text-sm font-medium&quot;
        &gt;
          Go back
        &lt;/button&gt;
      &lt;/div&gt;
    );
  }

  return (
    &lt;section className=&quot;mx-auto max-w-5xl p-6&quot;&gt;
      &lt;header className=&quot;border-border bg-surface/80 flex flex-col gap-4 rounded-lg border p-6 shadow&quot;&gt;
        &lt;div className=&quot;flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between&quot;&gt;
          &lt;div&gt;
            &lt;h1 className=&quot;text-text text-3xl font-bold&quot;&gt;{profile.name}&lt;/h1&gt;
            &lt;p className=&quot;text-text-muted text-sm&quot;&gt;
              {profile.country
                ? `Based in ${getCountryName(profile.country) ?? profile.country}`
                : &quot;Location unavailable&quot;}
            &lt;/p&gt;
            &lt;p className=&quot;text-text-muted text-xs&quot;&gt;{profile.email}&lt;/p&gt;
          &lt;/div&gt;
          &lt;div className=&quot;flex gap-6 text-sm&quot;&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-text font-semibold&quot;&gt;Products&lt;/p&gt;
              &lt;p className=&quot;text-text-muted text-sm&quot;&gt;
                {profile.stats.totalProducts}
              &lt;/p&gt;
            &lt;/div&gt;
            &lt;div&gt;
              &lt;p className=&quot;text-text font-semibold&quot;&gt;Average Rating&lt;/p&gt;
              &lt;p className=&quot;text-text-muted text-sm&quot;&gt;
                {profile.stats.totalRatings &gt; 0 &amp;&amp; profile.stats.averageRating
                  ? `${profile.stats.averageRating.toFixed(2)} (${profile.stats.totalRatings} ratings)`
                  : &quot;No ratings yet&quot;}
              &lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/header&gt;

      &lt;section className=&quot;mt-6 space-y-4&quot;&gt;
        &lt;div className=&quot;flex items-center justify-between&quot;&gt;
          &lt;h2 className=&quot;text-text text-xl font-semibold&quot;&gt;Services&lt;/h2&gt;
          &lt;button
            onClick={() =&gt; router.back()}
            className=&quot;text-primary hover:text-primary/80 text-sm font-medium&quot;
          &gt;
            Back to previous
          &lt;/button&gt;
        &lt;/div&gt;

        {profile.posts.length === 0 ? (
          &lt;div className=&quot;border-border bg-surface/60 text-text-muted rounded-lg border p-6 text-center text-sm&quot;&gt;
            This professional has not published any services yet.
          &lt;/div&gt;
        ) : (
          &lt;div className=&quot;grid gap-4 md:grid-cols-2&quot;&gt;
            {profile.posts.map((post) =&gt; (
              &lt;Link
                key={post.id}
                href={`/product/${post.id}`}
                className=&quot;border-border bg-surface/70 group flex flex-col rounded-lg border shadow transition hover:-translate-y-1 hover:shadow-lg&quot;
              &gt;
                &lt;div className=&quot;relative h-48 w-full overflow-hidden rounded-t-lg&quot;&gt;
                  &lt;Image
                    src={post.image_url ?? FALLBACK_IMAGE}
                    alt={post.title}
                    fill
                    className=&quot;object-cover transition group-hover:scale-105&quot;
                  /&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex flex-1 flex-col gap-3 p-4&quot;&gt;
                  &lt;div className=&quot;flex items-start justify-between gap-3&quot;&gt;
                    &lt;h3 className=&quot;text-text line-clamp-2 text-lg font-semibold&quot;&gt;
                      {post.title}
                    &lt;/h3&gt;
                    &lt;span className=&quot;text-accent text-sm font-semibold&quot;&gt;
                      ${post.price.toFixed(2)}
                    &lt;/span&gt;
                  &lt;/div&gt;
                  &lt;p className=&quot;text-text-muted line-clamp-3 text-sm&quot;&gt;
                    {post.description}
                  &lt;/p&gt;
                  &lt;div className=&quot;text-text-muted mt-auto flex items-center justify-between text-xs&quot;&gt;
                    &lt;span&gt;
                      {new Date(post.date).toLocaleDateString(undefined, {
                        year: &quot;numeric&quot;,
                        month: &quot;short&quot;,
                        day: &quot;numeric&quot;,
                      })}
                    &lt;/span&gt;
                    &lt;span&gt;
                      {post.ratingCount &amp;&amp; post.ratingCount &gt; 0 &amp;&amp; post.rating
                        ? `${post.rating.toFixed(1)} / 5 (${post.ratingCount} ratings)`
                        : &quot;No ratings yet&quot;}
                    &lt;/span&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/Link&gt;
            ))}
          &lt;/div&gt;
        )}
      &lt;/section&gt;
    &lt;/section&gt;
  );
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/typescript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
