<html>
<head>
    <title>prisma/seed.ts</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">prisma/seed.ts (<b>65</b> lines of code) (<a href="seed.ts">raw</a>):</h3>
<div id="editor">import { PrismaClient, Category } from &quot;@prisma/client&quot;;
import { faker } from &quot;@faker-js/faker&quot;;
import bcrypt from &quot;bcryptjs&quot;;

const prisma = new PrismaClient();

const USERS_COUNT = 20;
const POSTS_PER_USER = 5;

async function main() {
  faker.seed(2025);

  await prisma.$transaction([
    prisma.commands.deleteMany(),
    prisma.reviews.deleteMany(),
    prisma.posts.deleteMany(),
    prisma.users.deleteMany(),
  ]);
  // password hash
  const passwordHash = await bcrypt.hash(&quot;123&quot;, 10);

  // Helper to generate unique emails
  const generatedEmails = new Set&lt;string&gt;();
  function generateUniqueEmail() {
    let email: string;
    do {
      email = faker.internet.email({ provider: &quot;example.com&quot; }).toLowerCase();
    } while (generatedEmails.has(email));
    generatedEmails.add(email);
    return email;
  }

  const users = await Promise.all(
    Array.from({ length: USERS_COUNT }, () =&gt;
      prisma.users.create({
        data: {
          email: generateUniqueEmail(),
          name: faker.person.fullName(),
          country: faker.location.countryCode().toUpperCase(),
          password: passwordHash,
          birthday: faker.date.birthdate({ min: 18, max: 60, mode: &quot;age&quot; }),
        },
      }),
    ),
  );

  const posts = await Promise.all(
    users.flatMap((user) =&gt;
      Array.from({ length: POSTS_PER_USER }, () =&gt;
        prisma.posts.create({
          data: {
            user_id: user.id,
            title: faker.commerce.productName(),
            description: faker.commerce.productDescription(),
            price: Number.parseFloat(
              faker.commerce.price({ min: 5, max: 250, dec: 2 }),
            ),
            category: faker.helpers.arrayElement(Object.values(Category)),
            date: faker.date.recent({ days: 45 }),
          },
        }),
      ),
    ),
  );

  console.log(`Seeded ${users.length} users, ${posts.length} posts`);
}

main()
  .catch((error) =&gt; {
    console.error(&quot;Seeding error&quot;, error);
    process.exit(1);
  })
  .finally(async () =&gt; {
    await prisma.$disconnect();
  });
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/typescript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
