<head>
  <style>
    body {
      margin: 0;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/3d-force-graph"></script>
</head>

<body>
  <div id="3d-graph"></div>

  <script>
    const gData = {
      nodes: [
        {
          id: "all file extensions / ts (1)",
          size: 5,
        },
        {
          id: "all file extensions / css (1)",
          size: 5,
        },
        {
          id: "all file extensions / js (1)",
          size: 5,
        },
        {
          id: "main file extensions / tsx (1)",
          size: 5,
        },
        {
          id: "all file extensions / mjs (1)",
          size: 5,
        },
        {
          id: "all file extensions / tsx (1)",
          size: 5,
        },
      ],
      links: [
        {
          source: "all file extensions / css (1)",
          target: "all file extensions / mjs (1)",
          count: 1,
        },
        {
          source: "all file extensions / mjs (1)",
          target: "all file extensions / css (1)",
          count: 1,
        },
        {
          source: "all file extensions / css (1)",
          target: "all file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "all file extensions / tsx (1)",
          target: "all file extensions / css (1)",
          count: 1,
        },
        {
          source: "all file extensions / css (1)",
          target: "all file extensions / ts (1)",
          count: 1,
        },
        {
          source: "all file extensions / ts (1)",
          target: "all file extensions / css (1)",
          count: 1,
        },
        {
          source: "all file extensions / css (1)",
          target: "main file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "main file extensions / tsx (1)",
          target: "all file extensions / css (1)",
          count: 1,
        },
        {
          source: "all file extensions / css (1)",
          target: "all file extensions / js (1)",
          count: 1,
        },
        {
          source: "all file extensions / js (1)",
          target: "all file extensions / css (1)",
          count: 1,
        },
        {
          source: "all file extensions / mjs (1)",
          target: "all file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "all file extensions / tsx (1)",
          target: "all file extensions / mjs (1)",
          count: 1,
        },
        {
          source: "all file extensions / mjs (1)",
          target: "all file extensions / ts (1)",
          count: 1,
        },
        {
          source: "all file extensions / ts (1)",
          target: "all file extensions / mjs (1)",
          count: 1,
        },
        {
          source: "all file extensions / mjs (1)",
          target: "main file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "main file extensions / tsx (1)",
          target: "all file extensions / mjs (1)",
          count: 1,
        },
        {
          source: "all file extensions / mjs (1)",
          target: "all file extensions / js (1)",
          count: 1,
        },
        {
          source: "all file extensions / js (1)",
          target: "all file extensions / mjs (1)",
          count: 1,
        },
        {
          source: "all file extensions / tsx (1)",
          target: "all file extensions / ts (1)",
          count: 1,
        },
        {
          source: "all file extensions / ts (1)",
          target: "all file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "all file extensions / tsx (1)",
          target: "main file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "main file extensions / tsx (1)",
          target: "all file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "all file extensions / tsx (1)",
          target: "all file extensions / js (1)",
          count: 1,
        },
        {
          source: "all file extensions / js (1)",
          target: "all file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "all file extensions / ts (1)",
          target: "main file extensions / tsx (1)",
          count: 1,
        },
        {
          source: "main file extensions / tsx (1)",
          target: "all file extensions / ts (1)",
          count: 1,
        },
        {
          source: "all file extensions / ts (1)",
          target: "all file extensions / js (1)",
          count: 1,
        },
        {
          source: "all file extensions / js (1)",
          target: "all file extensions / ts (1)",
          count: 1,
        },
        {
          source: "main file extensions / tsx (1)",
          target: "all file extensions / js (1)",
          count: 1,
        },
        {
          source: "all file extensions / js (1)",
          target: "main file extensions / tsx (1)",
          count: 1,
        },
      ],
    };

    const maxNodeSize = gData.nodes
      .map((n) => n.size)
      .reduce((a, b) => Math.max(a, b));
    const maxCount = gData.links
      .map((l) => l.count)
      .reduce((a, b) => Math.max(a, b));

    gData.links = gData.links.map((l) => {
      return { source: l.target, target: l.source, count: l.count };
    });

    const Graph = ForceGraph3D()(document.getElementById("3d-graph"))
      .graphData(gData)
      .nodeRelSize(4)
      .nodeVal((n) => Math.max((20 * n.size) / maxNodeSize, 0.001))
      .nodeLabel((n) => n.id + " (" + n.size + ")")
      .nodeColor((n) => (n.id.startsWith("[") ? "skyblue" : ""))
      .linkDirectionalParticles(6)
      .linkDirectionalParticleSpeed((d) => (d.count / maxCount) * 0.01)
      .linkOpacity(0.1)
      .linkWidth((d) => (3 * d.count) / maxCount + 0.1);
  </script>
</body>
