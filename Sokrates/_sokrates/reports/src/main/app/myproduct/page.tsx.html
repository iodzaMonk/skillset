<html>
<head>
    <title>app/myproduct/page.tsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">app/myproduct/page.tsx (<b>96</b> lines of code) (<a href="page.tsx">raw</a>):</h3>
<div id="editor">&quot;use client&quot;;

import { useCallback, useState } from &quot;react&quot;;

import { useAuth } from &quot;../context/AuthContext&quot;;
import Modal from &quot;./_components/Modal&quot;;
import { PostList } from &quot;./_components/PostList&quot;;
import { usePostManager } from &quot;./_hooks/postStates&quot;;
import type { PostBody } from &quot;@/types/PostBody&quot;;

export default function ProductsPage() {
  const { user } = useAuth();
  const {
    posts,
    handleSubmit,
    isSubmitting,
    deletePosts,
    editingPost,
    startEditing,
    resetEditing,
    filePreview,
    handleFile,
  } = usePostManager({
    userId: user?.id,
  });

  const handleDeleteSelected = useCallback(
    (items: PostBody[]) =&gt; deletePosts(items),
    [deletePosts],
  );
  const [isCreateOpen, setIsCreateOpen] = useState(false);
  const openCreateModal = useCallback(() =&gt; {
    handleFile(undefined);
    resetEditing();
    setIsCreateOpen(true);
  }, [handleFile, resetEditing]);

  return (
    &lt;div className=&quot;space-y-6&quot;&gt;
      &lt;div className=&quot;flex w-full justify-end gap-4&quot;&gt;
        &lt;Modal
          isEditing={false}
          showTrigger={false}
          forceOpen={isCreateOpen}
          onFileChange={handleFile}
          filePreview={filePreview}
          onSubmit={async (event) =&gt; {
            const success = await handleSubmit(event);
            if (success) {
              resetEditing();
              setIsCreateOpen(false);
            }
            return success;
          }}
          isSubmitting={isSubmitting}
          onClose={() =&gt; {
            handleFile(undefined);
            resetEditing();
            setIsCreateOpen(false);
          }}
        /&gt;
        :
        {editingPost &amp;&amp; (
          &lt;Modal
            isEditing
            showTrigger={false}
            initialValues={{
              id: editingPost.id,
              title: editingPost.title,
              description: editingPost.description,
              price: editingPost.price,
              image_url: editingPost.image_url ?? null,
            }}
            onFileChange={handleFile}
            filePreview={filePreview}
            onSubmit={async (event) =&gt; {
              const success = await handleSubmit(event);
              if (success) {
                resetEditing();
                handleFile(undefined);
              }
              return success;
            }}
            isSubmitting={isSubmitting}
            onClose={() =&gt; {
              handleFile(undefined);
              resetEditing();
            }}
          /&gt;
        )}
      &lt;/div&gt;

      &lt;PostList
        posts={posts}
        onRequestDelete={handleDeleteSelected}
        onRequestEdit={(post) =&gt; {
          setIsCreateOpen(false);
          return startEditing(post);
        }}
        onRequestCreate={openCreateModal}
      /&gt;
    &lt;/div&gt;
  );
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/typescript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
