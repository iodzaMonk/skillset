<html>
<head>
    <title>app/Components/Header.tsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">app/Components/Header.tsx (<b>183</b> lines of code) (<a href="Header.tsx">raw</a>):</h3>
<div id="editor">&quot;use client&quot;;
import { DarkThemeToggle } from &quot;flowbite-react&quot;;
import { TransitionLink } from &quot;../utils/TransitionLink&quot;;
import { useEffect, useRef, useState } from &quot;react&quot;;
import { useRouter } from &quot;next/navigation&quot;;
import { useAuth } from &quot;../context/AuthContext&quot;;

type NavItem = {
  name: string;
  href?: string;
  action?: () =&gt; Promise&lt;void&gt; | void;
};

export default function Header() {
  const [open, setOpen] = useState(false);
  const panelRef = useRef&lt;HTMLDivElement&gt;(null);
  const popupRef = useRef&lt;HTMLElement&gt;(null);
  const triggerRef = useRef&lt;HTMLButtonElement&gt;(null);
  const { user, logout } = useAuth();
  const router = useRouter();
  const [isProcessingLogout, setIsProcessingLogout] = useState(false);

  const handleLogout = async () =&gt; {
    try {
      setIsProcessingLogout(true);
      await logout();
      router.push(&quot;/auth/login&quot;);
    } finally {
      setIsProcessingLogout(false);
    }
  };

  const navList: NavItem[] = user
    ? [
        { name: &quot;About us&quot;, href: &quot;/about&quot; },
        { name: &quot;Browse&quot;, href: &quot;/browse&quot; },
        { name: &quot;My Products&quot;, href: &quot;/myproduct&quot; },
        { name: &quot;Settings&quot;, href: &quot;/settings&quot; },
        { name: &quot;Logout&quot;, action: handleLogout },
      ]
    : [
        { name: &quot;Login&quot;, href: &quot;/auth/login&quot; },
        { name: &quot;Sign up&quot;, href: &quot;/auth/signup&quot; },
        { name: &quot;About us&quot;, href: &quot;/about&quot; },
        { name: &quot;Browse&quot;, href: &quot;/browse&quot; },
      ];

  useEffect(() =&gt; {
    if (open) document.body.classList.add(&quot;overflow-hidden&quot;);
    else document.body.classList.remove(&quot;overflow-hidden&quot;);
    const onKey = (e: KeyboardEvent) =&gt; e.key === &quot;Escape&quot; &amp;&amp; setOpen(false);
    const onPointerDown = (e: PointerEvent) =&gt; {
      if (!open) return;
      const panel = popupRef.current;
      const trigger = triggerRef.current;
      const target = e.target as Node;
      if (trigger &amp;&amp; (trigger === target || trigger.contains(target))) return;
      if (panel &amp;&amp; !panel.contains(target)) setOpen(false);
    };
    document.addEventListener(&quot;pointerdown&quot;, onPointerDown);
    document.addEventListener(&quot;keydown&quot;, onKey);
    return () =&gt; {
      document.removeEventListener(&quot;keydown&quot;, onKey);
      document.removeEventListener(&quot;pointerdown&quot;, onPointerDown);
    };
  }, [open]);

  const itemClasses =
    &quot;text-text hover:text-accent relative after:absolute after:bottom-0 after:left-0 after:h-[2px] after:w-0 after:bg-[--color-accent] after:transition-all after:duration-700 hover:after:w-full&quot;;

  return (
    &lt;&gt;
      &lt;header className=&quot;text-text relative z-50 mx-auto h-20 w-[95%]&quot;&gt;
        &lt;nav className=&quot;fixed mx-auto flex w-[95%] items-center justify-between py-4&quot;&gt;
          &lt;TransitionLink
            href=&quot;/&quot;
            className=&quot;!font-tinos text-text hover:text-accent z-50 text-4xl italic transition-colors&quot;
          &gt;
            SkillSet
          &lt;/TransitionLink&gt;

          &lt;div className=&quot;flex items-center&quot;&gt;
            {/* Flowbite toggle picks up tokens automatically */}
            &lt;DarkThemeToggle className=&quot;border-border bg-surface text-text hover:bg-surface-2 mr-4 rounded-md border px-2 py-1 focus:ring-2 focus:ring-[--color-ring] focus:outline-none&quot; /&gt;

            {/* Hamburger uses currentColor so we can theme it */}
            &lt;button
              ref={triggerRef}
              className=&quot;group text-text hover:text-accent relative z-50 flex size-10 flex-col items-center justify-center rounded-full focus:ring-2 focus:ring-[--color-ring] focus:outline-none&quot;
              onClick={() =&gt; setOpen((v) =&gt; !v)}
            &gt;
              &lt;span
                className={[
                  &quot;absolute top-1/2 left-1/2 h-[1.5px] w-6 -translate-x-1/2 bg-current transition-all duration-700&quot;,
                  open ? &quot;-rotate-45&quot; : &quot;-translate-y-1 rotate-0&quot;,
                ].join(&quot; &quot;)}
              /&gt;
              &lt;span
                className={[
                  &quot;absolute top-1/2 left-1/2 h-[1.5px] w-6 -translate-x-1/2 bg-current transition-all duration-700&quot;,
                  open ? &quot;rotate-45&quot; : &quot;translate-y-1 rotate-0&quot;,
                ].join(&quot; &quot;)}
              /&gt;
              &lt;svg
                viewBox=&quot;0 0 52 52&quot;
                fill=&quot;none&quot;
                xmlns=&quot;http://www.w3.org/2000/svg&quot;
                className=&quot;text-text/70 absolute size-10&quot;
              &gt;
                &lt;circle
                  cx=&quot;26&quot;
                  cy=&quot;26&quot;
                  r=&quot;25&quot;
                  stroke=&quot;currentColor&quot;
                  strokeWidth=&quot;1&quot;
                  className=&quot;circle-path&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/nav&gt;
      &lt;/header&gt;

      {/* Flyout */}
      &lt;div
        ref={panelRef}
        className={[
          &quot;fixed right-0 bottom-0 z-30 flex h-screen w-screen justify-center p-5 transition-all duration-700&quot;,
          &quot;text-text&quot;,
          open
            ? &quot;pointer-events-auto opacity-100&quot;
            : &quot;pointer-events-none opacity-0&quot;,
        ].join(&quot; &quot;)}
      &gt;
        &lt;nav
          ref={popupRef}
          className={[
            &quot;absolute top-20 z-40 flex h-fit w-[min(720px,90vw)] justify-center rounded-2xl border p-10 transition-all duration-700&quot;,
            &quot;bg-surface/95 border-border backdrop-blur&quot;,
            open
              ? &quot;pointer-events-auto translate-y-0 opacity-100&quot;
              : &quot;pointer-events-none -translate-y-6 opacity-0&quot;,
          ].join(&quot; &quot;)}
        &gt;
          &lt;ul className=&quot;group&quot;&gt;
            {navList.map((item, index) =&gt; (
              &lt;li
                key={item.name}
                className=&quot;p-6 text-5xl transition-all duration-500 group-hover:opacity-40 group-hover:blur-[1px] hover:scale-105 hover:opacity-100 hover:blur-none&quot;
              &gt;
                {item.action ? (
                  &lt;button
                    type=&quot;button&quot;
                    onClick={async () =&gt; {
                      setOpen(false);
                      await item.action?.();
                    }}
                    disabled={isProcessingLogout &amp;&amp; item.name === &quot;Logout&quot;}
                    className={`${itemClasses} ${
                      isProcessingLogout &amp;&amp; item.name === &quot;Logout&quot;
                        ? &quot;cursor-not-allowed opacity-60&quot;
                        : &quot;cursor-pointer&quot;
                    }`}
                  &gt;
                    &lt;span className=&quot;text-text-muted absolute top-2 -left-7 text-sm&quot;&gt;
                      0{index + 1}
                    &lt;/span&gt;
                    {item.name}
                  &lt;/button&gt;
                ) : (
                  &lt;TransitionLink
                    href={item.href!}
                    onClick={() =&gt; setOpen(false)}
                    className={itemClasses}
                  &gt;
                    &lt;span className=&quot;text-text-muted absolute top-2 -left-7 text-sm&quot;&gt;
                      0{index + 1}
                    &lt;/span&gt;
                    {item.name}
                  &lt;/TransitionLink&gt;
                )}
              &lt;/li&gt;
            ))}
          &lt;/ul&gt;
        &lt;/nav&gt;

        {/* Backdrop keyed to canvas, not pure black */}
        &lt;div
          className={[
            &quot;absolute inset-0 z-30 h-screen w-screen&quot;,
            &quot;bg-transition/30&quot;,
            &quot;transition-opacity duration-700&quot;,
            open ? &quot;opacity-100&quot; : &quot;opacity-0&quot;,
          ].join(&quot; &quot;)}
        /&gt;
      &lt;/div&gt;
    &lt;/&gt;
  );
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/typescript");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
