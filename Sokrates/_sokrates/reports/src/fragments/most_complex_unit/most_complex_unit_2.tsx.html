<html>
<head>
    <title>export function PostList()</title>
    <link rel="stylesheet" charset="UTF-8" href="https://d2bb1mtyn3kglb.cloudfront.net/lib/highlight/styles/docco.min.css">
    <script charset="UTF-8" type="application/javascript" src="https://d2bb1mtyn3kglb.cloudfront.net/lib/highlight/highlight.min.js"></script>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">export function PostList()</h3>
<p style="margin-top: 4px">in <i>app/myproduct/_components/PostList.tsx [21:181]</i></p>
<ul>
    <li><b>149</b> lines of code</li>
    <li><b>21</b> McCabe index (conditional complexity)</li>
</ul>
<pre>
<code class="tsx">
export function PostList({
  posts,
  onRequestEdit,
  onRequestDelete,
  onRequestCreate,
}: PostListProps) {
  const { user } = useAuth();
  const router = useRouter();
  const { selectedIds, toggleSelection, clearSelection, selectAll } =
    useSelection(posts.map((post) =&gt; post.id).filter(Boolean) as string[]);

  const selectedPosts = useMemo(
    () =&gt; posts.filter((post) =&gt; post.id &amp;&amp; selectedIds.includes(post.id)),
    [posts, selectedIds],
  );

  const totalSelected = selectedPosts.length;
  const totalPosts = posts.length;

  const masterCheckboxState =
    totalSelected === 0
      ? false
      : totalSelected === totalPosts
        ? true
        : &quot;indeterminate&quot;;

  const handleModify = () =&gt; {
    if (totalSelected !== 1 || !onRequestEdit) {
      return;
    }
    void onRequestEdit(selectedPosts[0]);
  };

  const handleDelete = async () =&gt; {
    if (totalSelected === 0 || !onRequestDelete) {
      return;
    }
    const result = await onRequestDelete(selectedPosts);
    if (result !== false) {
      clearSelection();
    }
  };

  if (!user?.vendor_id &amp;&amp; posts.length === 0) {
    return (
      &lt;section className=&quot;border-border bg-surface/60 mx-auto mt-10 flex w-full flex-col items-center gap-4 rounded-xl border p-10 text-center md:w-4/5 lg:w-3/4&quot;&gt;
        &lt;p className=&quot;text-text-muted text-sm&quot;&gt;
          Create a vendor account before creating products
        &lt;/p&gt;
        {onRequestCreate &amp;&amp; (
          &lt;Button
            type=&quot;button&quot;
            variant=&quot;success&quot;
            size=&quot;sm&quot;
            onClick={() =&gt; router.push(&quot;/settings&quot;)}
          &gt;
            Create a vendor account
          &lt;/Button&gt;
        )}
      &lt;/section&gt;
    );
  }

  if (posts.length === 0) {
    return (
      &lt;section className=&quot;border-border bg-surface/60 mx-auto mt-10 flex w-full flex-col items-center gap-4 rounded-xl border p-10 text-center md:w-4/5 lg:w-3/4&quot;&gt;
        &lt;p className=&quot;text-text-muted text-sm&quot;&gt;
          Once you add a product it will appear here.
        &lt;/p&gt;
        {onRequestCreate &amp;&amp; (
          &lt;Button
            type=&quot;button&quot;
            variant=&quot;success&quot;
            size=&quot;sm&quot;
            onClick={onRequestCreate}
          &gt;
            Create product
          &lt;/Button&gt;
        )}
      &lt;/section&gt;
    );
  }

  return (
    &lt;SelectableList&lt;PostBody&gt;
      items={posts}
      selectedIds={selectedIds}
      totalSelected={totalSelected}
      masterCheckboxState={masterCheckboxState}
      onSelectAll={selectAll}
      onClearSelection={clearSelection}
      onModify={handleModify}
      onDelete={handleDelete}
      onCreate={onRequestCreate}
      getItemId={(post) =&gt; post.id || &quot;&quot;}
      canModify={Boolean(onRequestEdit)}
      canDelete={Boolean(onRequestDelete)}
      renderItem={(product, isSelected) =&gt; {
        if (!product.id) return null;
        const postId = product.id;

        return (
          &lt;SelectableCard
            key={postId}
            id={postId}
            isSelected={isSelected}
            onToggle={toggleSelection}
            label={product.title}
          &gt;
            &lt;div className=&quot;bg-surface/80 relative w-full overflow-hidden rounded-lg sm:w-56&quot;&gt;
              {product.image_url ? (
                &lt;Image
                  src={product.image_url}
                  alt={product.title}
                  width={448}
                  height={336}
                  className=&quot;h-48 w-full object-cover&quot;
                /&gt;
              ) : product.image_location ? (
                &lt;div className=&quot;border-border/80 text-text-muted flex h-48 w-full items-center justify-center border border-dashed text-xs tracking-wide uppercase&quot;&gt;
                  Image stored at {product.image_location}
                &lt;/div&gt;
              ) : (
                &lt;div className=&quot;border-border/80 text-text-muted flex h-48 w-full items-center justify-center border border-dashed text-xs tracking-wide uppercase&quot;&gt;
                  No image uploaded
                &lt;/div&gt;
              )}
            &lt;/div&gt;

            &lt;div className=&quot;flex flex-1 flex-col gap-4&quot;&gt;
              &lt;div className=&quot;flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between&quot;&gt;
                &lt;div className=&quot;space-y-2&quot;&gt;
                  &lt;h2 className=&quot;text-text text-lg font-semibold sm:text-xl&quot;&gt;
                    {product.title}
                  &lt;/h2&gt;
                  {product.description &amp;&amp; (
                    &lt;p className=&quot;text-text-muted text-sm leading-6&quot;&gt;
                      {product.description}
                    &lt;/p&gt;
                  )}
                &lt;/div&gt;

                {product.price !== undefined &amp;&amp; (
                  &lt;div className=&quot;text-accent border-accent/50 inline-flex min-w-[6rem] items-center justify-center rounded-full border px-4 py-1 text-base font-semibold&quot;&gt;
                    {currencyFormatter.format(product.price)}
                  &lt;/div&gt;
                )}
              &lt;/div&gt;

              {isSelected &amp;&amp; (
                &lt;span className=&quot;text-accent bg-accent/10 inline-flex w-fit items-center gap-2 rounded-full px-3 py-1 text-xs font-medium&quot;&gt;
                  Selected
                &lt;/span&gt;
              )}
            &lt;/div&gt;
          &lt;/SelectableCard&gt;
        );
      }}
    /&gt;
  );
}

</code>
</pre>
<script>
    hljs.initHighlightingOnLoad();
</script>
</body>
